# Config file for ReBench
# Config format is YAML (see http://yaml.org/ for detailed spec)

# this run definition will be choosen if no parameters are given to rebench.py
default_experiment: all
default_data_file: 'benchmarks.data'

runs:
    invocations: 1
    iterations: 100
    min_iteration_time: 100

.iteration_numbers:
    fast_vm_macro:      &FAST_VM_MACRO      1500
    slow_vm_macro:      &SLOW_VM_MACRO      800
    fast_vm_micro:      &FAST_VM_MICRO      800
    slow_vm_micro:      &SLOW_VM_MICRO      400

# Codespeed Reporting
reporting:
    codespeed:
        project: RIR
        url: http://rflies.rir.o1o.ch/result/add/json/

# definition of benchmark suites
benchmark_suites:

    shootout:
        gauge_adapter: RebenchLog
        location: Benchmarks/shootout
        command: "harness.r %(benchmark)s %(iterations)s "
        iterations: 10  # the number iterations measured
        max_invocation_time: 6000
        benchmarks:  # extra_args: benchmarkParameter [innerIterations]
            - binarytrees:
                command: binarytrees/binarytrees
                extra_args: 12
            - binarytrees_2:
                command: binarytrees/binarytrees_2
                extra_args: 12
            - binarytrees_naive:
                command: binarytrees/binarytrees_naive
                extra_args: 12
            - fannkuchredux:
                command: fannkuch/fannkuchredux
                extra_args: 9
            - fannkuchredux_naive:
                command: fannkuch/fannkuchredux_naive
                extra_args: 9
            - fasta:
                command: fasta/fasta
                extra_args: 80000
            - fasta_2:
                command: fasta/fasta_2
                extra_args: 80000
            - fasta_3:
                command: fasta/fasta_3
                extra_args: 80000
            - fasta_naive:
                command: fasta/fasta_naive
                extra_args: 150000
            - fasta_naive_2:
                command: fasta/fasta_naive_2
                extra_args: 100000
            - fastaredux:
                command: fastaredux/fastaredux
                extra_args: 150000
            - fastaredux_naive:
                command: fastaredux/fastaredux_naive
                extra_args: 150000
            - knucleotide:
                command: knucleotide/knucleotide
                extra_args: 5000
            - knucleotide_brute:
                command: knucleotide/knucleotide_brute
                extra_args: 2000
            - knucleotide_brute_2:
                command: knucleotide/knucleotide_brute_2
                extra_args: 2000
            - knucleotide_brute_3:
                command: knucleotide/knucleotide_brute_3
                extra_args: 2000
            - mandelbrot_ascii:
                command: mandelbrot/mandelbrot_ascii
                extra_args: 1500
# turn off for now since they write binary data to stdout...
#            - mandelbrot:
#                command: mandelbrot/mandelbrot
#                extra_args: 2000
#            - mandelbrot_naive:
#                command: mandelbrot/mandelbrot_naive
#                extra_args: 400
            - mandelbrot_naive_ascii:
                command: mandelbrot/mandelbrot_naive_ascii
                extra_args: 400
            - mandelbrot_noout:
                command: mandelbrot/mandelbrot_noout
                extra_args: 2000
            - mandelbrot_noout_naive:
                command: mandelbrot/mandelbrot_noout_naive
                extra_args: 1200
            - nbody:
                command: nbody/nbody
                extra_args: 50000
            - nbody_2:
                command: nbody/nbody_2
                extra_args: 30000
            - nbody_3:
                command: nbody/nbody_3
                extra_args: 30000
            - nbody_naive:
                command: nbody/nbody_naive
                extra_args: 40000
            - nbody_naive_2:
                command: nbody/nbody_naive_2
                extra_args: 25000
            - pidigits:
                command: pidigits/pidigits
                extra_args: 100
            - regexdna:
                command: regexdna/regexdna
                extra_args: 500000
            - reversecomplement:
                command: reversecomplement/reversecomplement
                extra_args: 500000
            - reversecomplement_2:
                command: reversecomplement/reversecomplement_2
                extra_args: 500000
            - reversecomplement_naive:
                command: reversecomplement/reversecomplement_naive
                extra_args: 150000
            - spectralnorm:
                command: spectralnorm/spectralnorm
                extra_args: 1000
            - spectralnorm_alt:
                command: spectralnorm/spectralnorm_alt
                extra_args: 4000
            - spectralnorm_alt_2:
                command: spectralnorm/spectralnorm_alt_2
                extra_args: 1200
            - spectralnorm_alt_3:
                command: spectralnorm/spectralnorm_alt_3
                extra_args: 250
            - spectralnorm_alt_4:
                command: spectralnorm/spectralnorm_alt_4
                extra_args: 250
            - spectralnorm_math:
                command: spectralnorm/spectralnorm_math
                extra_args: 1000
            - spectralnorm_naive:
                command: spectralnorm/spectralnorm_naive
                extra_args: 250

# VMs have a name and are specified by a path and the binary to be executed
virtual_machines:
    GNU-R:
        path: "Implementations/R/RIR/external/vanilla-r/bin"
        binary: "Rscript"
        args: ""
        environment: "R_ENABLE_JIT=3"
    RIR:
        path: "Implementations/R/RIR/bin/"
        binary: "Rscript"
        args: ""
        environment: "PIR_ENABLE=off R_ENABLE_JIT=3"
    PIR:
        path: "Implementations/R/RIR/bin/"
        binary: "Rscript"
        args: ""
        environment: "R_ENABLE_JIT=3"

# define the benchmarks to be executed for a re-executable benchmark run
experiments:
    AreWeFast:
        data_file: areWeFast.data
        executions:
          - RIR:
              suites:
                - shootout
          - PIR:
              suites:
                - shootout
          - GNU-R:
              suites:
                - shootout
